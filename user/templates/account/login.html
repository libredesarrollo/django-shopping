{% extends "account/base_entrance.html" %}
{% load i18n %}
{% load allauth account %}

{% block head_title %}
{% trans "Sign In" %}
{% endblock head_title %}

{% block extra_head %}
{% load static tailwind_tags %}
{% tailwind_css %}

{% endblock extra_head %}

{% block content %}

<style>
    ul {
        margin-left: 20px;
    }

    ul li {
        color: #999;
        font-size: 12px;
        list-style-type: disc;
    }

    #id_password_helptext {
        display: block;
        font-size: 12px;
        text-decoration: underline;
        text-align: right;
    }
</style>

<div class="flex min-h-screen items-center justify-center bg-gray-50 px-4 py-12">
    <div class="w-full max-w-md space-y-8">
        <!-- TÃ­tulo -->
        <div class="text-center">
            <h1 class="text-3xl font-bold tracking-tight text-gray-900">
                {% trans "Sign In" %}
            </h1>
            <p class="mt-2 text-sm text-gray-600">
                {% blocktranslate %}If you have not created an account yet, then please
                <a href="{{ signup_url }}" class="font-medium text-indigo-600 hover:text-indigo-500">
                    sign up
                </a> first.{% endblocktranslate %}
            </p>
        </div>

        <!-- Formulario -->
        {% url 'account_login' as login_url %}
        <form method="post" action="{{ login_url }}" class="mt-8 space-y-6 bg-white p-6 rounded-2xl shadow">
            {% csrf_token %}
            {% element fields form=form unlabeled=True %}
            {% endelement %}
            {{ redirect_field }}

            <button type="submit"
                class="w-full rounded-xl bg-indigo-600 px-4 py-2 text-white font-semibold hover:bg-indigo-700 transition">
                {% trans "Sign In" %}
            </button>
        </form>

        <!-- Opciones extra -->
        {% if LOGIN_BY_CODE_ENABLED or PASSKEY_LOGIN_ENABLED %}
        <div class="mt-6">
            <div class="relative">
                <div class="absolute inset-0 flex items-center">
                    <div class="w-full border-t border-gray-300"></div>
                </div>
                <div class="relative flex justify-center text-sm">
                    <span class="bg-gray-50 px-2 text-gray-500">{% trans "Or continue with" %}</span>
                </div>
            </div>

            <div class="mt-6 space-y-3">
                {% if PASSKEY_LOGIN_ENABLED %}
                <button type="submit" form="mfa_login" id="passkey_login"
                    class="w-full rounded-xl border border-indigo-600 px-4 py-2 text-indigo-600 font-semibold hover:bg-indigo-50 transition">
                    {% trans "Sign in with a passkey" %}
                </button>
                {% endif %}
                {% if LOGIN_BY_CODE_ENABLED %}
                <a href="{{ request_login_code_url }}"
                    class="block w-full text-center rounded-xl border border-indigo-600 px-4 py-2 text-indigo-600 font-semibold hover:bg-indigo-50 transition">
                    {% trans "Send me a sign-in code" %}
                </a>
                {% endif %}
            </div>
        </div>
        {% endif %}

        <!-- Social login -->
        {% if SOCIALACCOUNT_ENABLED %}
        <div class="mt-6">
            {% include "socialaccount/snippets/login.html" with page_layout="entrance" %}
        </div>
        {% endif %}
    </div>
</div>
{% endblock content %}

{% block extra_body %}
{{ block.super }}
{% if PASSKEY_LOGIN_ENABLED %}
{% include "mfa/webauthn/snippets/login_script.html" with button_id="passkey_login" %}
{% endif %}
{% endblock %}